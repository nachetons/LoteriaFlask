<!DOCTYPE html>
<html lang="en">

<head>
  {% include '/components/links.html' %}
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

</head>

<body>
  {% include '/components/nav.html' %}
  <h1>ESTAS EN RESULTS</h1>
  <div class="container">
    <div class="row my-3">
      <div class="col">
        <h4>Estadistica de apuestas</h4>
        <select id="selectElement" onchange="enviarSeleccion()">
          <option value="Semana">Semana</option>
          <option value="Mes">Mes</option>
          <option value="A침o">A침o</option>
        </select>

        <select>
          <option value="1">Apuestas</option>
          <option value="2">Ganancias</option>
          <option value="3">Perdidas</option>
        </select>
      </div>
    </div>
  <h1>Resultados</h1>
  
  <div id="graph"></div>
  {% include '/components/footer.html' %}



  
  <script>
    function enviarSeleccion() {
      var selectElement = document.getElementById("selectElement");
      var seleccion = selectElement.options[selectElement.selectedIndex].value;
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "/results");
      xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
      xhr.onload = function () {
        if (xhr.status === 200) {
          console.log(seleccion);
          var graph_data = JSON.parse(xhr.responseText);
          // Generar la gr치fica utilizando los datos obtenidos
          Plotly.newPlot('graph', graph_data.data, graph_data.layout);
        }
      };
      xhr.send(JSON.stringify({ seleccion: seleccion }));
    }
  
    // Inicialmente, cargar los datos por defecto (A침o)
    enviarSeleccion();
  </script>
</body>

</html>